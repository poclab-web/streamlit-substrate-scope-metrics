### 入力データ

- CSV形式で作成してください。
- 1列目には、基質のInChIまたはSMILESを入力してください。
- 2列目以降に、反応条件を入力してください。正例は1、負例は-1、ラベル無しは0とします。
- 反応条件より後の列に、記述子を入力してください。ECFP OnBits, ECFP Tanimoto, ECFP ConvexHullを計算する場合は、記述子は必要ありません。

- フェノール類を対象としている場合は、[こちら](https://github.com/poclab-web/streamlit-substrate-scope-metrics/blob/main/data/phenols_28d.csv)から28次元データセットをダウンロードして利用できます。


#### 例1 (反応条件2つ, 3次元)

| InChI                                                                   | condition_1 | condition_2 |         HOMO | MolLogP |   MolWt |
| :---------------------------------------------------------------------- | ----------: | ----------: | -----------: | ------: | ------: |
| InChI=1S/C14H22O/c1-13(2,3)10-7-8-12(15)11(9-10)14(4,5)6/h7-9,15H,1-6H3 |           1 |           1 | -7.285308122 |  3.9872 | 206.329 |
| InChI=1S/C10H14O/c1-4-9-5-7(2)8(3)6-10(9)11/h5-6,11H,4H2,1-3H3          |           0 |           1 | -7.107889794 | 2.57144 | 150.221 |
| InChI=1S/C10H14O/c1-10(2,3)8-4-6-9(11)7-5-8/h4-7,11H,1-3H3              |          -1 |           0 | -7.359867358 |  2.6897 | 150.221 |
| InChI=1S/C8H10O/c1-6-3-4-8(9)7(2)5-6/h3-5,9H,1-2H3                      |           1 |           1 |  -7.21918442 | 2.00904 | 122.167 |
| InChI=1S/C11H16O/c1-8-5-6-10(12)9(7-8)11(2,3)4/h5-7,12H,1-4H3           |           1 |           1 |   -7.1838096 | 2.99812 | 164.248 |


#### 例2 (反応条件4つ, 記述子なし)

| SMILES                                           | K3FeCN6 | MesAcr+BF4- | CuCl | Diacetyl |
| :----------------------------------------------- | ------: | ----------: | ---: | -------: |
| CC(C)(C)c1ccc(O)c(C(C)(C)C)c1                    |       1 |           1 |    1 |        1 |
| COc1cc(C=O)ccc1O                                 |      -1 |           0 |    0 |        0 |
| COC(=O)C(Cc1ccc(O)c(C(C)(C)C)c1)NC(=O)OCc1ccccc1 |       0 |           1 |    0 |        0 |
| CCCCc1ccc(O)cc1                                  |       1 |           0 |    0 |        0 |
| Cc1ccc(O)c(C)c1                                  |       1 |           1 |    0 |        1 |
| COc1cc(C#N)ccc1O                                 |      -1 |           0 |    0 |        0 |
| Cc1cccc(-c2ccc(O)c(C(C)(C)C)c2)c1                |       0 |           0 |    1 |        0 |
| Cc1cc(O)c(C(C)C)cc1C                             |       0 |           1 |    0 |        1 |
| CC(C)(c1ccccc1)c1ccc(O)c(C(C)(C)c2ccccc2)c1      |       0 |           0 |    1 |        0 |


---
### 操作方法

#### データ入力
- :material/home: Home でデータを入力します。
- Range, Distance, ConvexHullの計算には標準化が必要です。「標準化を行う」のスイッチがオンの場合は、入力データが標準化されます。
- 入力データに含まれる反応条件の数を入力し、CSV形式の入力データをアップロードします。
- 入力データの読み込みが完了すると、基質の数、記述子の数、反応条件名が表示されます。


#### ECFPの設定
- :material/home: Home 下部の :material/settings: 詳細設定で半径とビット数を変更できます。既定値は半径2で 2048ビットです。

#### 基質適用範囲の評価
- 画面左側のサイドバーから、計算したい指標を選択してください。
- 全てのグラフは、拡大や縮小の操作が可能です。

> :material/warning: 注意  
> - ECFP Tanimotoの計算には、2つ以上の正例が必要です。  
> - ECFP ConvexHullとConvexHullの計算には、3つ以上の正例が必要です。  
> - ConvexHullの計算は、記述子が2次元以上である必要があります。  

#### リセット
- :material/home: Home 下部の「リセット」をクリックすると、入力データと全てのキャッシュが消去されます。
